{"abi":[{"type":"function","name":"D","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"calculateConviction","inputs":[{"name":"_timePassed","type":"uint256","internalType":"uint256"},{"name":"_lastConv","type":"uint256","internalType":"uint256"},{"name":"_oldAmount","type":"uint256","internalType":"uint256"},{"name":"_decay","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"pure"},{"type":"function","name":"calculateThreshold","inputs":[{"name":"_requestedAmount","type":"uint256","internalType":"uint256"},{"name":"_poolAmount","type":"uint256","internalType":"uint256"},{"name":"_totalPointsActivated","type":"uint256","internalType":"uint256"},{"name":"_decay","type":"uint256","internalType":"uint256"},{"name":"_weight","type":"uint256","internalType":"uint256"},{"name":"_maxRatio","type":"uint256","internalType":"uint256"},{"name":"_minThresholdPoints","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"_threshold","type":"uint256","internalType":"uint256"}],"stateMutability":"pure"},{"type":"function","name":"getMaxConviction","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"_decay","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"pure"}],"bytecode":{"object":"0x6103f7610035600b8282823980515f1a60731461002957634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe7300000000000000000000000000000000000000003014608060405260043610610055575f3560e01c8063010dfe64146100595780630f529ba21461007e57806329dfe5ba146100885780639bcb99c41461009b575b5f80fd5b61006c6100673660046102e4565b6100ae565b60405190815260200160405180910390f35b61006c6298968081565b61006c610096366004610313565b61013b565b61006c6100a936600461035a565b61023f565b5f84816100cb6100c562989680608087901b61038e565b8361026d565b905060806001607f1b6100e186629896806103ad565b6100ef84600160801b6103ad565b6100fc629896808a6103c0565b61010691906103c0565b610110919061038e565b61011a89856103c0565b61012491906103d7565b61012e91906103d7565b901c979650505050505050565b5f808761014c8a600160401b6103c0565b610156919061038e565b6298968061016886600160401b6103c0565b610172919061038e565b61017c91906103ad565b905060408761018e88629896806103ad565b62989680604061019e86806103c0565b901c6101b16298968060808c901b61038e565b6101bb919061038e565b6101c591906103c0565b6101cf919061038e565b6101d991906103c0565b901c91508615610233575f62989680886101f38a8a61023f565b61020062989680886103c0565b61020a91906103c0565b610214919061038e565b61021e919061038e565b905080831161022d578061022f565b825b9250505b50979650505050505050565b5f61024d82629896806103ad565b61025a62989680856103c0565b610264919061038e565b90505b92915050565b600160801b82825b80156102b757806001165f036102995761028f82836102bf565b915060011c610275565b6102a383836102bf565b92506102b06001826103ad565b9050610275565b505092915050565b5f60806001607f1b6102d184866103c0565b6102db91906103d7565b901c9392505050565b5f805f80608085870312156102f7575f80fd5b5050823594602084013594506040840135936060013592509050565b5f805f805f805f60e0888a031215610329575f80fd5b505085359760208701359750604087013596606081013596506080810135955060a0810135945060c0013592509050565b5f806040838503121561036b575f80fd5b50508035926020909101359150565b634e487b7160e01b5f52601160045260245ffd5b5f826103a857634e487b7160e01b5f52601260045260245ffd5b500490565b818103818111156102675761026761037a565b80820281158282048414176102675761026761037a565b808201808211156102675761026761037a56fea164736f6c6343000817000a","sourceMap":"103:4280:167:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;103:4280:167;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x7300000000000000000000000000000000000000003014608060405260043610610055575f3560e01c8063010dfe64146100595780630f529ba21461007e57806329dfe5ba146100885780639bcb99c41461009b575b5f80fd5b61006c6100673660046102e4565b6100ae565b60405190815260200160405180910390f35b61006c6298968081565b61006c610096366004610313565b61013b565b61006c6100a936600461035a565b61023f565b5f84816100cb6100c562989680608087901b61038e565b8361026d565b905060806001607f1b6100e186629896806103ad565b6100ef84600160801b6103ad565b6100fc629896808a6103c0565b61010691906103c0565b610110919061038e565b61011a89856103c0565b61012491906103d7565b61012e91906103d7565b901c979650505050505050565b5f808761014c8a600160401b6103c0565b610156919061038e565b6298968061016886600160401b6103c0565b610172919061038e565b61017c91906103ad565b905060408761018e88629896806103ad565b62989680604061019e86806103c0565b901c6101b16298968060808c901b61038e565b6101bb919061038e565b6101c591906103c0565b6101cf919061038e565b6101d991906103c0565b901c91508615610233575f62989680886101f38a8a61023f565b61020062989680886103c0565b61020a91906103c0565b610214919061038e565b61021e919061038e565b905080831161022d578061022f565b825b9250505b50979650505050505050565b5f61024d82629896806103ad565b61025a62989680856103c0565b610264919061038e565b90505b92915050565b600160801b82825b80156102b757806001165f036102995761028f82836102bf565b915060011c610275565b6102a383836102bf565b92506102b06001826103ad565b9050610275565b505092915050565b5f60806001607f1b6102d184866103c0565b6102db91906103d7565b901c9392505050565b5f805f80608085870312156102f7575f80fd5b5050823594602084013594506040840135936060013592509050565b5f805f805f805f60e0888a031215610329575f80fd5b505085359760208701359750604087013596606081013596506080810135955060a0810135945060c0013592509050565b5f806040838503121561036b575f80fd5b50508035926020909101359150565b634e487b7160e01b5f52601160045260245ffd5b5f826103a857634e487b7160e01b5f52601260045260245ffd5b500490565b818103818111156102675761026761037a565b80820281158282048414176102675761026761037a565b808201808211156102675761026761037a56fea164736f6c6343000817000a","sourceMap":"103:4280:167:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;770:616;;;;;;:::i;:::-;;:::i;:::-;;;558:25:259;;;546:2;531:18;770:616:167;;;;;;;134:36;;162:8;134:36;;1967:861;;;;;;:::i;:::-;;:::i;2834:141::-;;;;;;:::i;:::-;;:::i;770:616::-;920:7;955:11;920:7;1230:28;1235:19;162:8;1246:3;1236:13;;;1235:19;:::i;:::-;1256:1;1230:4;:28::i;:::-;1210:48;-1:-1:-1;1376:3:167;-1:-1:-1;;;1348:10:167;1352:6;162:8;1348:10;:::i;:::-;1323:19;1333:9;-1:-1:-1;;;1323:19:167;:::i;:::-;1305:14;162:8;1305:10;:14;:::i;:::-;:38;;;;:::i;:::-;1304:55;;;;:::i;:::-;1278:21;1290:9;1278;:21;:::i;:::-;1277:83;;;;:::i;:::-;1276:95;;;;:::i;:::-;1275:104;;;770:616;-1:-1:-1;;;;;;;770:616:167:o;1967:861::-;2237:18;;2342:11;2312:26;:16;-1:-1:-1;;;2312:26:167;:::i;:::-;2311:42;;;;:::i;:::-;162:8;2284:19;:9;-1:-1:-1;;;2284:19:167;:::i;:::-;2283:25;;;;:::i;:::-;:70;;;;:::i;:::-;2267:86;-1:-1:-1;2491:2:167;2465:21;2450:10;2454:6;162:8;2450:10;:::i;:::-;162:8;2437:2;2419:13;2427:5;;2419:13;:::i;:::-;2418:21;;2393:20;162:8;2405:3;2394:14;;;2393:20;:::i;:::-;2392:48;;;;:::i;:::-;2391:54;;;;:::i;:::-;2390:71;;;;:::i;:::-;2389:97;;;;:::i;:::-;2388:105;;;-1:-1:-1;2508:26:167;;2504:318;;2550:25;2714:7;2675:21;2623:47;2640:21;2663:6;2623:16;:47::i;:::-;2597:23;162:8;2597:19;:23;:::i;:::-;:73;;;;:::i;:::-;2596:101;;;;:::i;:::-;2578:143;;;;:::i;:::-;2550:171;;2761:17;2748:10;:30;:63;;2794:17;2748:63;;;2781:10;2748:63;2735:76;;2536:286;2504:318;2257:571;1967:861;;;;;;;;;:::o;2834:141::-;2913:7;2956:10;2960:6;162:8;2956:10;:::i;:::-;2941;162:8;2941:6;:10;:::i;:::-;2940:27;;;;:::i;:::-;2932:36;;2834:141;;;;;:::o;3197:542::-;-1:-1:-1;;;3455:2:167;3479;3518:215;3525:5;;3518:215;;3550:1;3554;3550:5;3559:1;3550:10;3546:177;;3584:10;3589:1;3592;3584:4;:10::i;:::-;3580:14;-1:-1:-1;3618:1:167;3612:7;3518:215;;3546:177;3668:16;3673:7;3682:1;3668:4;:16::i;:::-;3658:26;-1:-1:-1;3702:6:167;3707:1;3702:6;;:::i;:::-;;;3518:215;;;3275:464;;3197:542;;;;:::o;4000:381::-;4061:15;4371:3;-1:-1:-1;;;4348:7:167;4353:2;4348;:7;:::i;:::-;4347:19;;;;:::i;:::-;4346:28;;;4000:381;-1:-1:-1;;;4000:381:167:o;14:385:259:-;100:6;108;116;124;177:3;165:9;156:7;152:23;148:33;145:53;;;194:1;191;184:12;145:53;-1:-1:-1;;217:23:259;;;287:2;272:18;;259:32;;-1:-1:-1;338:2:259;323:18;;310:32;;389:2;374:18;361:32;;-1:-1:-1;14:385:259;-1:-1:-1;14:385:259:o;594:592::-;707:6;715;723;731;739;747;755;808:3;796:9;787:7;783:23;779:33;776:53;;;825:1;822;815:12;776:53;-1:-1:-1;;848:23:259;;;918:2;903:18;;890:32;;-1:-1:-1;969:2:259;954:18;;941:32;;1020:2;1005:18;;992:32;;-1:-1:-1;1071:3:259;1056:19;;1043:33;;-1:-1:-1;1123:3:259;1108:19;;1095:33;;-1:-1:-1;1175:3:259;1160:19;1147:33;;-1:-1:-1;594:592:259;-1:-1:-1;594:592:259:o;1191:248::-;1259:6;1267;1320:2;1308:9;1299:7;1295:23;1291:32;1288:52;;;1336:1;1333;1326:12;1288:52;-1:-1:-1;;1359:23:259;;;1429:2;1414:18;;;1401:32;;-1:-1:-1;1191:248:259:o;1444:127::-;1505:10;1500:3;1496:20;1493:1;1486:31;1536:4;1533:1;1526:15;1560:4;1557:1;1550:15;1576:217;1616:1;1642;1632:132;;1686:10;1681:3;1677:20;1674:1;1667:31;1721:4;1718:1;1711:15;1749:4;1746:1;1739:15;1632:132;-1:-1:-1;1778:9:259;;1576:217::o;1798:128::-;1865:9;;;1886:11;;;1883:37;;;1900:18;;:::i;1931:168::-;2004:9;;;2035;;2052:15;;;2046:22;;2032:37;2022:71;;2073:18;;:::i;2104:125::-;2169:9;;;2190:10;;;2187:36;;;2203:18;;:::i","linkReferences":{}},"methodIdentifiers":{"D()":"0f529ba2","calculateConviction(uint256,uint256,uint256,uint256)":"010dfe64","calculateThreshold(uint256,uint256,uint256,uint256,uint256,uint256,uint256)":"29dfe5ba","getMaxConviction(uint256,uint256)":"9bcb99c4"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"name\":\"D\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_timePassed\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lastConv\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_oldAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_decay\",\"type\":\"uint256\"}],\"name\":\"calculateConviction\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_requestedAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_poolAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_totalPointsActivated\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_decay\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_weight\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_maxRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_minThresholdPoints\",\"type\":\"uint256\"}],\"name\":\"calculateThreshold\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"_threshold\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_decay\",\"type\":\"uint256\"}],\"name\":\"getMaxConviction\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"calculateConviction(uint256,uint256,uint256,uint256)\":{\"details\":\"Conviction formula: a^t * y(0) + x * (1 - a^t) / (1 - a) Solidity implementation: y = (2^128 * a^t * y0 + x * D * (2^128 - 2^128 * a^t) / (D - aD) + 2^127) / 2^128\",\"params\":{\"_lastConv\":\"Last conviction record\",\"_oldAmount\":\"Amount of tokens staked until now\",\"_timePassed\":\"Number of blocks since last conviction record\"},\"returns\":{\"_0\":\"Current conviction\"}},\"calculateThreshold(uint256,uint256,uint256,uint256,uint256,uint256,uint256)\":{\"details\":\"Formula: \\u03c1 * totalStaked / (1 - a) / (\\u03b2 - requestedAmount / total)**2 For the Solidity implementation we amplify \\u03c1 and \\u03b2 and simplify the formula: weight = \\u03c1 * D maxRatio = \\u03b2 * D decay = a * D threshold = weight * totalStaked * D ** 2 * funds ** 2 / (D - decay) / (maxRatio * funds - requestedAmount * D) ** 2\",\"params\":{\"_requestedAmount\":\"Requested amount of tokens on certain proposal\"},\"returns\":{\"_threshold\":\"Threshold a proposal's conviction should surpass in order to be able to executed it.\"}}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"pkg/contracts/src/CVStrategy/ConvictionsUtils.sol\":\"ConvictionsUtils\"},\"evmVersion\":\"shanghai\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\"},\"optimizer\":{\"enabled\":true,\"runs\":0},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":@openzeppelin/foundry/=lib/openzeppelin-foundry-upgrades/src/\",\":@prb/math/=lib/allo-v2/lib/v2-core/lib/prb-math/\",\":@prb/test/=lib/allo-v2/lib/v2-core/lib/prb-test/src/\",\":@sablier/v2-core/=lib/allo-v2/lib/v2-core/\",\":@src/=pkg/contracts/src/\",\":@superfluid-finance/=lib/protocol-monorepo/packages/\",\":ERC1155/=lib/allo-v2/lib/hats-protocol/lib/ERC1155/\",\":__safe-smart-account/=lib/__safe-smart-account/\",\":allo-v2-contracts/=lib/allo-v2/contracts/\",\":allo-v2-test/=lib/allo-v2/test/\",\":allo-v2/=lib/allo-v2/\",\":ds-test/=lib/allo-v2/lib/forge-std/lib/ds-test/src/\",\":eas-contracts/=lib/allo-v2/lib/eas-contracts/contracts/\",\":eas-proxy/=lib/allo-v2/lib/eas-proxy/contracts/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-gas-snapshot/=lib/allo-v2/lib/permit2/lib/forge-gas-snapshot/src/\",\":forge-std/=lib/forge-std/src/\",\":hats-protocol/=lib/allo-v2/lib/hats-protocol/\",\":hedgey-vesting/=lib/allo-v2/lib/hedgey-vesting/contracts/\",\":lib/ERC1155/=lib/allo-v2/lib/hats-protocol/lib/ERC1155/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":permit2/=lib/allo-v2/lib/permit2/\",\":prb-math/=lib/allo-v2/lib/v2-core/lib/prb-math/src/\",\":prb-test/=lib/allo-v2/lib/v2-core/lib/prb-test/src/\",\":protocol-monorepo/=lib/protocol-monorepo/packages/solidity-semantic-money/src/\",\":safe-smart-account/=lib/safe-smart-account/\",\":solady/=lib/allo-v2/lib/solady/src/\",\":solarray/=lib/allo-v2/lib/v2-core/lib/solarray/src/\",\":solbase/=lib/allo-v2/lib/hats-protocol/lib/solbase/src/\",\":solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/\",\":solmate/=lib/allo-v2/lib/permit2/lib/solmate/\",\":superfluid-protocol-monorepo/=lib/allo-v2/lib/superfluid-protocol-monorepo/packages/solidity-semantic-money/src/\",\":utils/=lib/allo-v2/lib/hats-protocol/lib/utils/\",\":v2-core/=lib/allo-v2/lib/v2-core/\"]},\"sources\":{\"lib/allo-v2/contracts/core/interfaces/IRegistry.sol\":{\"keccak256\":\"0x3a2edcea094551fc86612932d42bd6b4682d20fb7b46cfdbeee39ba85367749f\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c922d497fdfdd2f43a009959429c761d1fb61501ca5d91abf9ae873ac58d437e\",\"dweb:/ipfs/QmaiUx4uVajytmFJQJdGh2mJK2RKn4xNVrARurJdF3iwzA\"]},\"lib/allo-v2/contracts/core/libraries/Metadata.sol\":{\"keccak256\":\"0x96444e1b6b4adf69d76debd36a792d618e50a7902248ed84b6f07ccdab946893\",\"license\":\"AGPL-3.0-only\",\"urls\":[\"bzz-raw://eee957068fb48e486d8186d61e8a002a85a0e0004763c88ba03552afb47f3bf5\",\"dweb:/ipfs/QmWawMnwBMj8tyUoL6RMJtXbeSZUqLUN7iFieQqgUnFYro\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://bd39944e8fc06be6dbe2dd1d8449b5336e23c6a7ba3e8e9ae5ae0f37f35283f5\",\"dweb:/ipfs/QmPV3FGYjVwvKSgAXKUN3r9T9GwniZz83CxBpM7vyj2G53\"]},\"pkg/contracts/src/CVStrategy/ConvictionsUtils.sol\":{\"keccak256\":\"0xd54a379ee976c795a17caa6e105069e9f07a755c94dfec944db41bdf2c38eeef\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://400c2847505ffd7db6d4f7f25bd69fde083dc77ba036c81a5ef3fe817dd57dab\",\"dweb:/ipfs/QmaoxuPgnxK8G7ZchBmsAfpca5Qay17LcxDSwnzyAkWoZD\"]},\"pkg/contracts/src/CVStrategy/ICVStrategy.sol\":{\"keccak256\":\"0xf0d7e5ae2886d9fd6e9e661919336b690baf131332db0841bf6ea96fd89051d4\",\"license\":\"AGPL-3.0-only\",\"urls\":[\"bzz-raw://6834ac67f71d4f071e09d0abdfa1f8183c1bc96872a372e5750ec40ee69b1d87\",\"dweb:/ipfs/QmV7CQKzzMaMNYtjnQJshhbtomMyBWdaB8FgnFSM97gSE1\"]},\"pkg/contracts/src/interfaces/IArbitrable.sol\":{\"keccak256\":\"0x62f583c799ab885f04092c780ca25ca58383e34981427c82be73c70f8cc6ca52\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://7226cc99e84cb741d69b82d3cd25536d2f9ee5afc58b8c613d9f41e6e48b2508\",\"dweb:/ipfs/QmPwhRBYXx4EtqX3rPdD5ZRqYTWocFbSmkLtPRHWp7at6r\"]},\"pkg/contracts/src/interfaces/IArbitrator.sol\":{\"keccak256\":\"0xc0a92b8bb28734b08c8542295b3911453c3650b48a1ee44bd8728ec5dab287dd\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://4e8b6554d773f8e2c8672354ae6803ff1f38d91eaf6ff55d6c8ab7c3a4babbf5\",\"dweb:/ipfs/QmVjctpFtzzA9Ln2GZ2mP6qY5pgBAetqKRAqBHQnR4KUsk\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"view","type":"function","name":"D","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"_timePassed","type":"uint256"},{"internalType":"uint256","name":"_lastConv","type":"uint256"},{"internalType":"uint256","name":"_oldAmount","type":"uint256"},{"internalType":"uint256","name":"_decay","type":"uint256"}],"stateMutability":"pure","type":"function","name":"calculateConviction","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"_requestedAmount","type":"uint256"},{"internalType":"uint256","name":"_poolAmount","type":"uint256"},{"internalType":"uint256","name":"_totalPointsActivated","type":"uint256"},{"internalType":"uint256","name":"_decay","type":"uint256"},{"internalType":"uint256","name":"_weight","type":"uint256"},{"internalType":"uint256","name":"_maxRatio","type":"uint256"},{"internalType":"uint256","name":"_minThresholdPoints","type":"uint256"}],"stateMutability":"pure","type":"function","name":"calculateThreshold","outputs":[{"internalType":"uint256","name":"_threshold","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"_decay","type":"uint256"}],"stateMutability":"pure","type":"function","name":"getMaxConviction","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{"calculateConviction(uint256,uint256,uint256,uint256)":{"details":"Conviction formula: a^t * y(0) + x * (1 - a^t) / (1 - a) Solidity implementation: y = (2^128 * a^t * y0 + x * D * (2^128 - 2^128 * a^t) / (D - aD) + 2^127) / 2^128","params":{"_lastConv":"Last conviction record","_oldAmount":"Amount of tokens staked until now","_timePassed":"Number of blocks since last conviction record"},"returns":{"_0":"Current conviction"}},"calculateThreshold(uint256,uint256,uint256,uint256,uint256,uint256,uint256)":{"details":"Formula: ρ * totalStaked / (1 - a) / (β - requestedAmount / total)**2 For the Solidity implementation we amplify ρ and β and simplify the formula: weight = ρ * D maxRatio = β * D decay = a * D threshold = weight * totalStaked * D ** 2 * funds ** 2 / (D - decay) / (maxRatio * funds - requestedAmount * D) ** 2","params":{"_requestedAmount":"Requested amount of tokens on certain proposal"},"returns":{"_threshold":"Threshold a proposal's conviction should surpass in order to be able to executed it."}}},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","@openzeppelin/foundry/=lib/openzeppelin-foundry-upgrades/src/","@prb/math/=lib/allo-v2/lib/v2-core/lib/prb-math/","@prb/test/=lib/allo-v2/lib/v2-core/lib/prb-test/src/","@sablier/v2-core/=lib/allo-v2/lib/v2-core/","@src/=pkg/contracts/src/","@superfluid-finance/=lib/protocol-monorepo/packages/","ERC1155/=lib/allo-v2/lib/hats-protocol/lib/ERC1155/","__safe-smart-account/=lib/__safe-smart-account/","allo-v2-contracts/=lib/allo-v2/contracts/","allo-v2-test/=lib/allo-v2/test/","allo-v2/=lib/allo-v2/","ds-test/=lib/allo-v2/lib/forge-std/lib/ds-test/src/","eas-contracts/=lib/allo-v2/lib/eas-contracts/contracts/","eas-proxy/=lib/allo-v2/lib/eas-proxy/contracts/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-gas-snapshot/=lib/allo-v2/lib/permit2/lib/forge-gas-snapshot/src/","forge-std/=lib/forge-std/src/","hats-protocol/=lib/allo-v2/lib/hats-protocol/","hedgey-vesting/=lib/allo-v2/lib/hedgey-vesting/contracts/","lib/ERC1155/=lib/allo-v2/lib/hats-protocol/lib/ERC1155/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin-foundry-upgrades/=lib/openzeppelin-foundry-upgrades/src/","openzeppelin/=lib/openzeppelin-contracts/contracts/","permit2/=lib/allo-v2/lib/permit2/","prb-math/=lib/allo-v2/lib/v2-core/lib/prb-math/src/","prb-test/=lib/allo-v2/lib/v2-core/lib/prb-test/src/","protocol-monorepo/=lib/protocol-monorepo/packages/solidity-semantic-money/src/","safe-smart-account/=lib/safe-smart-account/","solady/=lib/allo-v2/lib/solady/src/","solarray/=lib/allo-v2/lib/v2-core/lib/solarray/src/","solbase/=lib/allo-v2/lib/hats-protocol/lib/solbase/src/","solidity-stringutils/=lib/openzeppelin-foundry-upgrades/lib/solidity-stringutils/","solmate/=lib/allo-v2/lib/permit2/lib/solmate/","superfluid-protocol-monorepo/=lib/allo-v2/lib/superfluid-protocol-monorepo/packages/solidity-semantic-money/src/","utils/=lib/allo-v2/lib/hats-protocol/lib/utils/","v2-core/=lib/allo-v2/lib/v2-core/"],"optimizer":{"enabled":true,"runs":0},"metadata":{"bytecodeHash":"none"},"compilationTarget":{"pkg/contracts/src/CVStrategy/ConvictionsUtils.sol":"ConvictionsUtils"},"evmVersion":"shanghai","libraries":{}},"sources":{"lib/allo-v2/contracts/core/interfaces/IRegistry.sol":{"keccak256":"0x3a2edcea094551fc86612932d42bd6b4682d20fb7b46cfdbeee39ba85367749f","urls":["bzz-raw://c922d497fdfdd2f43a009959429c761d1fb61501ca5d91abf9ae873ac58d437e","dweb:/ipfs/QmaiUx4uVajytmFJQJdGh2mJK2RKn4xNVrARurJdF3iwzA"],"license":"MIT"},"lib/allo-v2/contracts/core/libraries/Metadata.sol":{"keccak256":"0x96444e1b6b4adf69d76debd36a792d618e50a7902248ed84b6f07ccdab946893","urls":["bzz-raw://eee957068fb48e486d8186d61e8a002a85a0e0004763c88ba03552afb47f3bf5","dweb:/ipfs/QmWawMnwBMj8tyUoL6RMJtXbeSZUqLUN7iFieQqgUnFYro"],"license":"AGPL-3.0-only"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305","urls":["bzz-raw://bd39944e8fc06be6dbe2dd1d8449b5336e23c6a7ba3e8e9ae5ae0f37f35283f5","dweb:/ipfs/QmPV3FGYjVwvKSgAXKUN3r9T9GwniZz83CxBpM7vyj2G53"],"license":"MIT"},"pkg/contracts/src/CVStrategy/ConvictionsUtils.sol":{"keccak256":"0xd54a379ee976c795a17caa6e105069e9f07a755c94dfec944db41bdf2c38eeef","urls":["bzz-raw://400c2847505ffd7db6d4f7f25bd69fde083dc77ba036c81a5ef3fe817dd57dab","dweb:/ipfs/QmaoxuPgnxK8G7ZchBmsAfpca5Qay17LcxDSwnzyAkWoZD"],"license":"MIT"},"pkg/contracts/src/CVStrategy/ICVStrategy.sol":{"keccak256":"0xf0d7e5ae2886d9fd6e9e661919336b690baf131332db0841bf6ea96fd89051d4","urls":["bzz-raw://6834ac67f71d4f071e09d0abdfa1f8183c1bc96872a372e5750ec40ee69b1d87","dweb:/ipfs/QmV7CQKzzMaMNYtjnQJshhbtomMyBWdaB8FgnFSM97gSE1"],"license":"AGPL-3.0-only"},"pkg/contracts/src/interfaces/IArbitrable.sol":{"keccak256":"0x62f583c799ab885f04092c780ca25ca58383e34981427c82be73c70f8cc6ca52","urls":["bzz-raw://7226cc99e84cb741d69b82d3cd25536d2f9ee5afc58b8c613d9f41e6e48b2508","dweb:/ipfs/QmPwhRBYXx4EtqX3rPdD5ZRqYTWocFbSmkLtPRHWp7at6r"],"license":"MIT"},"pkg/contracts/src/interfaces/IArbitrator.sol":{"keccak256":"0xc0a92b8bb28734b08c8542295b3911453c3650b48a1ee44bd8728ec5dab287dd","urls":["bzz-raw://4e8b6554d773f8e2c8672354ae6803ff1f38d91eaf6ff55d6c8ab7c3a4babbf5","dweb:/ipfs/QmVjctpFtzzA9Ln2GZ2mP6qY5pgBAetqKRAqBHQnR4KUsk"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[],"types":{}},"ast":{"absolutePath":"pkg/contracts/src/CVStrategy/ConvictionsUtils.sol","id":103072,"exportedSymbols":{"CVParams":[103180],"ConvictionsUtils":[103071]},"nodeType":"SourceUnit","src":"32:4352:167","nodes":[{"id":102793,"nodeType":"PragmaDirective","src":"32:24:167","nodes":[],"literals":["solidity","^","0.8",".19"]},{"id":102795,"nodeType":"ImportDirective","src":"58:43:167","nodes":[],"absolutePath":"pkg/contracts/src/CVStrategy/ICVStrategy.sol","file":"./ICVStrategy.sol","nameLocation":"-1:-1:-1","scope":103072,"sourceUnit":103312,"symbolAliases":[{"foreign":{"id":102794,"name":"CVParams","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103180,"src":"66:8:167","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":103071,"nodeType":"ContractDefinition","src":"103:4280:167","nodes":[{"id":102798,"nodeType":"VariableDeclaration","src":"134:36:167","nodes":[],"constant":true,"functionSelector":"0f529ba2","mutability":"constant","name":"D","nameLocation":"158:1:167","scope":103071,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102796,"name":"uint256","nodeType":"ElementaryTypeName","src":"134:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3130303030303030","id":102797,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"162:8:167","typeDescriptions":{"typeIdentifier":"t_rational_10000000_by_1","typeString":"int_const 10000000"},"value":"10000000"},"visibility":"public"},{"id":102801,"nodeType":"VariableDeclaration","src":"185:71:167","nodes":[],"constant":true,"mutability":"constant","name":"TWO_128","nameLocation":"211:7:167","scope":103071,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102799,"name":"uint256","nodeType":"ElementaryTypeName","src":"185:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3078313030303030303030303030303030303030303030303030303030303030303030","id":102800,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"221:35:167","typeDescriptions":{"typeIdentifier":"t_rational_340282366920938463463374607431768211456_by_1","typeString":"int_const 3402...(31 digits omitted)...1456"},"value":"0x100000000000000000000000000000000"},"visibility":"internal"},{"id":102804,"nodeType":"VariableDeclaration","src":"272:70:167","nodes":[],"constant":true,"mutability":"constant","name":"TWO_127","nameLocation":"298:7:167","scope":103071,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102802,"name":"uint256","nodeType":"ElementaryTypeName","src":"272:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30783830303030303030303030303030303030303030303030303030303030303030","id":102803,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"308:34:167","typeDescriptions":{"typeIdentifier":"t_rational_170141183460469231731687303715884105728_by_1","typeString":"int_const 1701...(31 digits omitted)...5728"},"value":"0x80000000000000000000000000000000"},"visibility":"internal"},{"id":102862,"nodeType":"FunctionDefinition","src":"770:616:167","nodes":[],"body":{"id":102861,"nodeType":"Block","src":"933:453:167","nodes":[],"statements":[{"assignments":[102819],"declarations":[{"constant":false,"id":102819,"mutability":"mutable","name":"t","nameLocation":"951:1:167","nodeType":"VariableDeclaration","scope":102861,"src":"943:9:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102818,"name":"uint256","nodeType":"ElementaryTypeName","src":"943:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":102821,"initialValue":{"id":102820,"name":"_timePassed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102807,"src":"955:11:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"943:23:167"},{"assignments":[102823],"declarations":[{"constant":false,"id":102823,"mutability":"mutable","name":"atTWO_128","nameLocation":"1218:9:167","nodeType":"VariableDeclaration","scope":102861,"src":"1210:17:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102822,"name":"uint256","nodeType":"ElementaryTypeName","src":"1210:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":102833,"initialValue":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102830,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102827,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102825,"name":"_decay","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102813,"src":"1236:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"hexValue":"313238","id":102826,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1246:3:167","typeDescriptions":{"typeIdentifier":"t_rational_128_by_1","typeString":"int_const 128"},"value":"128"},"src":"1236:13:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102828,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1235:15:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":102829,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"1253:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1235:19:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":102831,"name":"t","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102819,"src":"1256:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":102824,"name":"_pow","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103049,"src":"1230:4:167","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":102832,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1230:28:167","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"1210:48:167"},{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102859,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102856,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102853,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102836,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102834,"name":"atTWO_128","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102823,"src":"1278:9:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102835,"name":"_lastConv","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102809,"src":"1290:9:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1278:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102837,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1277:23:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102851,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102845,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102840,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102838,"name":"_oldAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102811,"src":"1305:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102839,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"1318:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1305:14:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102843,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102841,"name":"TWO_128","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102801,"src":"1323:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":102842,"name":"atTWO_128","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102823,"src":"1333:9:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1323:19:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102844,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1322:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1305:38:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102846,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1304:40:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102849,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102847,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"1348:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":102848,"name":"_decay","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102813,"src":"1352:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1348:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102850,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1347:12:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1304:55:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102852,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1303:57:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1277:83:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102854,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1276:85:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":102855,"name":"TWO_127","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102804,"src":"1364:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"1276:95:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102857,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"1275:97:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"hexValue":"313238","id":102858,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1376:3:167","typeDescriptions":{"typeIdentifier":"t_rational_128_by_1","typeString":"int_const 128"},"value":"128"},"src":"1275:104:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":102817,"id":102860,"nodeType":"Return","src":"1268:111:167"}]},"documentation":{"id":102805,"nodeType":"StructuredDocumentation","src":"359:406:167","text":" @dev Conviction formula: a^t * y(0) + x * (1 - a^t) / (1 - a)\n Solidity implementation: y = (2^128 * a^t * y0 + x * D * (2^128 - 2^128 * a^t) / (D - aD) + 2^127) / 2^128\n @param _timePassed Number of blocks since last conviction record\n @param _lastConv Last conviction record\n @param _oldAmount Amount of tokens staked until now\n @return Current conviction"},"functionSelector":"010dfe64","implemented":true,"kind":"function","modifiers":[],"name":"calculateConviction","nameLocation":"779:19:167","parameters":{"id":102814,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102807,"mutability":"mutable","name":"_timePassed","nameLocation":"807:11:167","nodeType":"VariableDeclaration","scope":102862,"src":"799:19:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102806,"name":"uint256","nodeType":"ElementaryTypeName","src":"799:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102809,"mutability":"mutable","name":"_lastConv","nameLocation":"828:9:167","nodeType":"VariableDeclaration","scope":102862,"src":"820:17:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102808,"name":"uint256","nodeType":"ElementaryTypeName","src":"820:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102811,"mutability":"mutable","name":"_oldAmount","nameLocation":"847:10:167","nodeType":"VariableDeclaration","scope":102862,"src":"839:18:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102810,"name":"uint256","nodeType":"ElementaryTypeName","src":"839:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102813,"mutability":"mutable","name":"_decay","nameLocation":"867:6:167","nodeType":"VariableDeclaration","scope":102862,"src":"859:14:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102812,"name":"uint256","nodeType":"ElementaryTypeName","src":"859:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"798:76:167"},"returnParameters":{"id":102817,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102816,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":102862,"src":"920:7:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102815,"name":"uint256","nodeType":"ElementaryTypeName","src":"920:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"919:9:167"},"scope":103071,"stateMutability":"pure","virtual":false,"visibility":"public"},{"id":102970,"nodeType":"FunctionDefinition","src":"1967:861:167","nodes":[],"body":{"id":102969,"nodeType":"Block","src":"2257:571:167","nodes":[],"statements":[{"assignments":[102883],"declarations":[{"constant":false,"id":102883,"mutability":"mutable","name":"denom","nameLocation":"2275:5:167","nodeType":"VariableDeclaration","scope":102969,"src":"2267:13:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102882,"name":"uint256","nodeType":"ElementaryTypeName","src":"2267:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":102901,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102900,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102891,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102888,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102884,"name":"_maxRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102875,"src":"2284:9:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"commonType":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"},"id":102887,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":102885,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2296:1:167","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"3634","id":102886,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2301:2:167","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"src":"2296:7:167","typeDescriptions":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"}},"src":"2284:19:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102889,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2283:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":102890,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2307:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2283:25:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102899,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102896,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102892,"name":"_requestedAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102865,"src":"2312:16:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"commonType":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"},"id":102895,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":102893,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2331:1:167","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"3634","id":102894,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2336:2:167","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"src":"2331:7:167","typeDescriptions":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"}},"src":"2312:26:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102897,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2311:28:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":102898,"name":"_poolAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102867,"src":"2342:11:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2311:42:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2283:70:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2267:86:167"},{"expression":{"id":102933,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":102902,"name":"_threshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102880,"src":"2363:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102932,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102929,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102926,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102920,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102917,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102908,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102905,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102903,"name":"_weight","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102873,"src":"2394:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"hexValue":"313238","id":102904,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2405:3:167","typeDescriptions":{"typeIdentifier":"t_rational_128_by_1","typeString":"int_const 128"},"value":"128"},"src":"2394:14:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102906,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2393:16:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":102907,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2412:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2393:20:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102909,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2392:22:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102915,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102912,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102910,"name":"denom","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102883,"src":"2419:5:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102911,"name":"denom","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102883,"src":"2427:5:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2419:13:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102913,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2418:15:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"hexValue":"3634","id":102914,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2437:2:167","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"src":"2418:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102916,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2417:23:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2392:48:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102918,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2391:50:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102919,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2444:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2391:54:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102921,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2390:56:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102924,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102922,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2450:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":102923,"name":"_decay","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102871,"src":"2454:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2450:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102925,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2449:12:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2390:71:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102927,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2389:73:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102928,"name":"_totalPointsActivated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102869,"src":"2465:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2389:97:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102930,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2388:99:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"hexValue":"3634","id":102931,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2491:2:167","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"src":"2388:105:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2363:130:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":102934,"nodeType":"ExpressionStatement","src":"2363:130:167"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102937,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102935,"name":"_totalPointsActivated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102869,"src":"2508:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":102936,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2533:1:167","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"2508:26:167","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":102968,"nodeType":"IfStatement","src":"2504:318:167","trueBody":{"id":102967,"nodeType":"Block","src":"2536:286:167","statements":[{"assignments":[102939],"declarations":[{"constant":false,"id":102939,"mutability":"mutable","name":"thresholdOverride","nameLocation":"2558:17:167","nodeType":"VariableDeclaration","scope":102967,"src":"2550:25:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102938,"name":"uint256","nodeType":"ElementaryTypeName","src":"2550:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":102957,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102956,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102951,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102947,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102942,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102940,"name":"_minThresholdPoints","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102877,"src":"2597:19:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102941,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2619:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2597:23:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"arguments":[{"id":102944,"name":"_totalPointsActivated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102869,"src":"2640:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":102945,"name":"_decay","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102871,"src":"2663:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":102943,"name":"getMaxConviction","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102991,"src":"2623:16:167","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":102946,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2623:47:167","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2597:73:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102948,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2596:75:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"components":[{"id":102949,"name":"_totalPointsActivated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102869,"src":"2675:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102950,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2674:23:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2596:101:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102952,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2578:133:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"commonType":{"typeIdentifier":"t_rational_10000000_by_1","typeString":"int_const 10000000"},"id":102955,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"3130","id":102953,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2714:2:167","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"37","id":102954,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2720:1:167","typeDescriptions":{"typeIdentifier":"t_rational_7_by_1","typeString":"int_const 7"},"value":"7"},"src":"2714:7:167","typeDescriptions":{"typeIdentifier":"t_rational_10000000_by_1","typeString":"int_const 10000000"}},"src":"2578:143:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2550:171:167"},{"expression":{"id":102965,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":102958,"name":"_threshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102880,"src":"2735:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102961,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102959,"name":"_threshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102880,"src":"2748:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":102960,"name":"thresholdOverride","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102939,"src":"2761:17:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2748:30:167","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseExpression":{"id":102963,"name":"thresholdOverride","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102939,"src":"2794:17:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":102964,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"Conditional","src":"2748:63:167","trueExpression":{"id":102962,"name":"_threshold","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102880,"src":"2781:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2735:76:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":102966,"nodeType":"ExpressionStatement","src":"2735:76:167"}]}}]},"documentation":{"id":102863,"nodeType":"StructuredDocumentation","src":"1392:570:167","text":" @dev Formula: ρ * totalStaked / (1 - a) / (β - requestedAmount / total)**2\n For the Solidity implementation we amplify ρ and β and simplify the formula:\n weight = ρ * D\n maxRatio = β * D\n decay = a * D\n threshold = weight * totalStaked * D ** 2 * funds ** 2 / (D - decay) / (maxRatio * funds - requestedAmount * D) ** 2\n @param _requestedAmount Requested amount of tokens on certain proposal\n @return _threshold Threshold a proposal's conviction should surpass in order to be able to\n executed it."},"functionSelector":"29dfe5ba","implemented":true,"kind":"function","modifiers":[],"name":"calculateThreshold","nameLocation":"1976:18:167","parameters":{"id":102878,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102865,"mutability":"mutable","name":"_requestedAmount","nameLocation":"2012:16:167","nodeType":"VariableDeclaration","scope":102970,"src":"2004:24:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102864,"name":"uint256","nodeType":"ElementaryTypeName","src":"2004:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102867,"mutability":"mutable","name":"_poolAmount","nameLocation":"2046:11:167","nodeType":"VariableDeclaration","scope":102970,"src":"2038:19:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102866,"name":"uint256","nodeType":"ElementaryTypeName","src":"2038:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102869,"mutability":"mutable","name":"_totalPointsActivated","nameLocation":"2075:21:167","nodeType":"VariableDeclaration","scope":102970,"src":"2067:29:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102868,"name":"uint256","nodeType":"ElementaryTypeName","src":"2067:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102871,"mutability":"mutable","name":"_decay","nameLocation":"2114:6:167","nodeType":"VariableDeclaration","scope":102970,"src":"2106:14:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102870,"name":"uint256","nodeType":"ElementaryTypeName","src":"2106:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102873,"mutability":"mutable","name":"_weight","nameLocation":"2138:7:167","nodeType":"VariableDeclaration","scope":102970,"src":"2130:15:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102872,"name":"uint256","nodeType":"ElementaryTypeName","src":"2130:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102875,"mutability":"mutable","name":"_maxRatio","nameLocation":"2163:9:167","nodeType":"VariableDeclaration","scope":102970,"src":"2155:17:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102874,"name":"uint256","nodeType":"ElementaryTypeName","src":"2155:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102877,"mutability":"mutable","name":"_minThresholdPoints","nameLocation":"2190:19:167","nodeType":"VariableDeclaration","scope":102970,"src":"2182:27:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102876,"name":"uint256","nodeType":"ElementaryTypeName","src":"2182:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1994:221:167"},"returnParameters":{"id":102881,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102880,"mutability":"mutable","name":"_threshold","nameLocation":"2245:10:167","nodeType":"VariableDeclaration","scope":102970,"src":"2237:18:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102879,"name":"uint256","nodeType":"ElementaryTypeName","src":"2237:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2236:20:167"},"scope":103071,"stateMutability":"pure","virtual":false,"visibility":"public"},{"id":102991,"nodeType":"FunctionDefinition","src":"2834:141:167","nodes":[],"body":{"id":102990,"nodeType":"Block","src":"2922:53:167","nodes":[],"statements":[{"expression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102987,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102981,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102979,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102972,"src":"2941:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":102980,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2950:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2941:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102982,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2940:12:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":102985,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":102983,"name":"D","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102798,"src":"2956:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":102984,"name":"_decay","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102974,"src":"2960:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2956:10:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102986,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2955:12:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"2940:27:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":102988,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"2939:29:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":102978,"id":102989,"nodeType":"Return","src":"2932:36:167"}]},"functionSelector":"9bcb99c4","implemented":true,"kind":"function","modifiers":[],"name":"getMaxConviction","nameLocation":"2843:16:167","parameters":{"id":102975,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102972,"mutability":"mutable","name":"amount","nameLocation":"2868:6:167","nodeType":"VariableDeclaration","scope":102991,"src":"2860:14:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102971,"name":"uint256","nodeType":"ElementaryTypeName","src":"2860:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102974,"mutability":"mutable","name":"_decay","nameLocation":"2884:6:167","nodeType":"VariableDeclaration","scope":102991,"src":"2876:14:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102973,"name":"uint256","nodeType":"ElementaryTypeName","src":"2876:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2859:32:167"},"returnParameters":{"id":102978,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102977,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":102991,"src":"2913:7:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102976,"name":"uint256","nodeType":"ElementaryTypeName","src":"2913:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2912:9:167"},"scope":103071,"stateMutability":"pure","virtual":false,"visibility":"public"},{"id":103049,"nodeType":"FunctionDefinition","src":"3197:542:167","nodes":[],"body":{"id":103048,"nodeType":"Block","src":"3275:464:167","nodes":[],"statements":[{"assignments":[103002],"declarations":[{"constant":false,"id":103002,"mutability":"mutable","name":"a","nameLocation":"3451:1:167","nodeType":"VariableDeclaration","scope":103048,"src":"3443:9:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":103001,"name":"uint256","nodeType":"ElementaryTypeName","src":"3443:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":103004,"initialValue":{"id":103003,"name":"_a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102994,"src":"3455:2:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3443:14:167"},{"assignments":[103006],"declarations":[{"constant":false,"id":103006,"mutability":"mutable","name":"b","nameLocation":"3475:1:167","nodeType":"VariableDeclaration","scope":103048,"src":"3467:9:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":103005,"name":"uint256","nodeType":"ElementaryTypeName","src":"3467:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":103008,"initialValue":{"id":103007,"name":"_b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102996,"src":"3479:2:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3467:14:167"},{"expression":{"id":103011,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":103009,"name":"_result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102999,"src":"3491:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":103010,"name":"TWO_128","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102801,"src":"3501:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3491:17:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":103012,"nodeType":"ExpressionStatement","src":"3491:17:167"},{"body":{"id":103046,"nodeType":"Block","src":"3532:201:167","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":103020,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":103018,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":103016,"name":"b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103006,"src":"3550:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"31","id":103017,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3554:1:167","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"3550:5:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":103019,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3559:1:167","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3550:10:167","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":103044,"nodeType":"Block","src":"3640:83:167","statements":[{"expression":{"id":103038,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":103033,"name":"_result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102999,"src":"3658:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":103035,"name":"_result","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102999,"src":"3673:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":103036,"name":"a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103002,"src":"3682:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":103034,"name":"_mul","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103070,"src":"3668:4:167","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":103037,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3668:16:167","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3658:26:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":103039,"nodeType":"ExpressionStatement","src":"3658:26:167"},{"expression":{"id":103042,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":103040,"name":"b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103006,"src":"3702:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"hexValue":"31","id":103041,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3707:1:167","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"3702:6:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":103043,"nodeType":"ExpressionStatement","src":"3702:6:167"}]},"id":103045,"nodeType":"IfStatement","src":"3546:177:167","trueBody":{"id":103032,"nodeType":"Block","src":"3562:72:167","statements":[{"expression":{"id":103026,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":103021,"name":"a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103002,"src":"3580:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":103023,"name":"a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103002,"src":"3589:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":103024,"name":"a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103002,"src":"3592:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":103022,"name":"_mul","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103070,"src":"3584:4:167","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":103025,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3584:10:167","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3580:14:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":103027,"nodeType":"ExpressionStatement","src":"3580:14:167"},{"expression":{"id":103030,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":103028,"name":"b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103006,"src":"3612:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":">>=","rightHandSide":{"hexValue":"31","id":103029,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3618:1:167","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"3612:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":103031,"nodeType":"ExpressionStatement","src":"3612:7:167"}]}}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":103015,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":103013,"name":"b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103006,"src":"3525:1:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":103014,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3529:1:167","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3525:5:167","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":103047,"nodeType":"WhileStatement","src":"3518:215:167"}]},"documentation":{"id":102992,"nodeType":"StructuredDocumentation","src":"2981:211:167","text":" Calculate (_a / 2^128)^_b * 2^128.  Parameter _a should be less than 2^128.\n @param _a left argument\n @param _b right argument\n @return _result (_a / 2^128)^_b * 2^128"},"implemented":true,"kind":"function","modifiers":[],"name":"_pow","nameLocation":"3206:4:167","parameters":{"id":102997,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102994,"mutability":"mutable","name":"_a","nameLocation":"3219:2:167","nodeType":"VariableDeclaration","scope":103049,"src":"3211:10:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102993,"name":"uint256","nodeType":"ElementaryTypeName","src":"3211:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":102996,"mutability":"mutable","name":"_b","nameLocation":"3231:2:167","nodeType":"VariableDeclaration","scope":103049,"src":"3223:10:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102995,"name":"uint256","nodeType":"ElementaryTypeName","src":"3223:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3210:24:167"},"returnParameters":{"id":103000,"nodeType":"ParameterList","parameters":[{"constant":false,"id":102999,"mutability":"mutable","name":"_result","nameLocation":"3266:7:167","nodeType":"VariableDeclaration","scope":103049,"src":"3258:15:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":102998,"name":"uint256","nodeType":"ElementaryTypeName","src":"3258:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3257:17:167"},"scope":103071,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":103070,"nodeType":"FunctionDefinition","src":"4000:381:167","nodes":[],"body":{"id":103069,"nodeType":"Block","src":"4078:303:167","nodes":[],"statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":103067,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":103064,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":103061,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":103059,"name":"_a","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103052,"src":"4348:2:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":103060,"name":"_b","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":103054,"src":"4353:2:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4348:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":103062,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4347:9:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":103063,"name":"TWO_127","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":102804,"src":"4359:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4347:19:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":103065,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"4346:21:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"hexValue":"313238","id":103066,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4371:3:167","typeDescriptions":{"typeIdentifier":"t_rational_128_by_1","typeString":"int_const 128"},"value":"128"},"src":"4346:28:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":103058,"id":103068,"nodeType":"Return","src":"4339:35:167"}]},"documentation":{"id":103050,"nodeType":"StructuredDocumentation","src":"3745:250:167","text":" Multiply _a by _b / 2^128.  Parameter _a should be less than or equal to\n 2^128 and parameter _b should be less than 2^128.\n @param _a left argument\n @param _b right argument\n @return _result _a * _b / 2^128"},"implemented":true,"kind":"function","modifiers":[],"name":"_mul","nameLocation":"4009:4:167","parameters":{"id":103055,"nodeType":"ParameterList","parameters":[{"constant":false,"id":103052,"mutability":"mutable","name":"_a","nameLocation":"4022:2:167","nodeType":"VariableDeclaration","scope":103070,"src":"4014:10:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":103051,"name":"uint256","nodeType":"ElementaryTypeName","src":"4014:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":103054,"mutability":"mutable","name":"_b","nameLocation":"4034:2:167","nodeType":"VariableDeclaration","scope":103070,"src":"4026:10:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":103053,"name":"uint256","nodeType":"ElementaryTypeName","src":"4026:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4013:24:167"},"returnParameters":{"id":103058,"nodeType":"ParameterList","parameters":[{"constant":false,"id":103057,"mutability":"mutable","name":"_result","nameLocation":"4069:7:167","nodeType":"VariableDeclaration","scope":103070,"src":"4061:15:167","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":103056,"name":"uint256","nodeType":"ElementaryTypeName","src":"4061:7:167","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4060:17:167"},"scope":103071,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"ConvictionsUtils","contractDependencies":[],"contractKind":"library","fullyImplemented":true,"linearizedBaseContracts":[103071],"name":"ConvictionsUtils","nameLocation":"111:16:167","scope":103072,"usedErrors":[],"usedEvents":[]}],"license":"MIT"},"id":167}